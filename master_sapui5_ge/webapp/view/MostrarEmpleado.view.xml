<mvc:View controllerName="emaldi.com.mastersapui5ge.controller.MostrarEmpleado" xmlns:mvc="sap.ui.core.mvc" xmlns:suite="sap.suite.ui.commons" xmlns="sap.m" xmlns:c="sap.ui.core" displayBlock="true" height="100%" busyIndicatorDelay="0">
    <SplitApp id="splitAppEmployee">
        <masterPages>
            <Page showHeader="false">
                <Toolbar class="sapUiTinyMarginTop">
                    <Button icon="sap-icon://nav-back" press="onPressBack" />
                    <SearchField liveChange="onSearchEmployee" width="100%" />
                </Toolbar>
                <List itemPress="onSelectEmployee" items="{path:'empModelSrv>/Users',filters:[{path:'SapId',operator:'EQ',value1:'german.emaldi@arcelormittal.com.ar'}]}">
                    <items>
                        <StandardListItem title="{empModelSrv>FirstName} {empModelSrv>LastName}" description="{empModelSrv>Dni}" type="Active" />
                    </items>
                </List>
            </Page>
        </masterPages>
        <detailPages>
            <Page id="detailEmployeeSelected" showHeader="false">
                <FlexBox alignItems="Center" justifyContent="Center" height="100%">
                    <Text text="{i18n>seleccioneEmpleado}" />
                </FlexBox>
            </Page>
            <Page id="detailEmployee" title="{i18n>detalleEmpleado}">
                <ObjectHeader
                    icon="{= ${empModelSrv>Type}==='0' ? 'sap-icon://employee-pane' : ${empModelSrv>Type}==='1' ? 'sap-icon://employee' : 'sap-icon://leads' }"
                    title="{empModelSrv>FirstName} {empModelSrv>LastName}"
                    intro="{empModelSrv>Dni}"
                    class="sapUiResponsivePadding--header"
                    responsive="true"
                >
                    <ObjectAttribute title="{i18n>fechaIncorporacion}" text="{ path:'empModelSrv>CreationDate', type:'sap.ui.model.type.Date'}" />
                    <ObjectAttribute title="{i18n>tipo}" text="{= ${empModelSrv>Type} === '0' ? ${i18n>interno} : ${empModelSrv>Type} === '1' ? ${i18n>autonomo} : ${i18n>gerente}}" />
                    <ObjectAttribute title="{i18n>comentario}" text="{empModelSrv>Comments}" />
                </ObjectHeader>
                <IconTabBar class="sapUiResponsiveContentPadding">
                    <items>
                        <IconTabFilter design="Horizontal" icon="sap-icon://attachment" text="{i18n>ficheros}">
                            <UploadCollection
                                id="UploadCollection"
                                maximumFilenameLength="55"
                                maximumFileSize="10"
                                multiple="true"
                                sameFilenameAllowed="true"
                                instantUpload="true"
                                uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments"
                                items="{empModelSrv>UserToAttachment}"
                                change="onChangeFile"
                                uploadComplete="onUploadCompleteFile"
                                beforeUploadStarts="onBeforeUploadStartFile"
                                fileDeleted="onFileDeletedFile"
                                noDataDescription="{i18n>Arrastrarficheros}"
                            >
                                <items>
                                    <UploadCollectionItem documentId="{empModelSrv>AttId}" visibleEdit="false" fileName="{empModelSrv>DocName}" press="donwloadFile" />
                                </items>
                            </UploadCollection>
                        </IconTabFilter>
                        <IconTabFilter icon="sap-icon://money-bills" design="Horizontal" text="{i18n>historial}">
                            <suite:Timeline enableDoubleSided="true" groupByType="Year" groupBy="CreationDate" showHeaderBar="false" enableScroll="false" height="100%" sortOldestFirst="true" content="{empModelSrv>UserToSalary}">
                                <suite:content>
                                    <suite:TimelineItem
                                        userName="{parts:[{path:'empModelSrv>Ammount'},{path:'empModelSrv>Waers'}],
												type: 'sap.ui.model.type.Currency',
												formatOptions: {showMeasure: false}}"
                                        icon="sap-icon://circle-task"
                                        text="{empModelSrv>Comments}"
                                        dateTime="{empModelSrv>CreationDate}"
                                    />
                                </suite:content>
                            </suite:Timeline>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
                <footer>
                    <Toolbar>
                        <ToolbarSpacer />
                        <Button text="{i18n>darDeBaja}" press="onDeleteEmployee" />
                        <Button text="{i18n>ascender}" press="onPromotionEmployee" />
                    </Toolbar>
                </footer>
            </Page>
        </detailPages>
    </SplitApp>
</mvc:View>
